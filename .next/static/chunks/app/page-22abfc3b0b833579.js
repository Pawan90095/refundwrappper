(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4796:function(e,t,s){Promise.resolve().then(s.bind(s,4439))},4439:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var a=s(7437),r=s(2265),l=s(4258),n=s(9896),i=s(500),o=s(5430),d=s(6127),c=s(2022);function m(e){let{score:t,size:s=200}=e,r=t<=25?{primary:"#22c55e",secondary:"#bbf7d0",label:"LOW RISK"}:t<=50?{primary:"#f59e0b",secondary:"#fef3c7",label:"MEDIUM RISK"}:t<=75?{primary:"#f97316",secondary:"#fed7aa",label:"HIGH RISK"}:{primary:"#ef4444",secondary:"#fee2e2",label:"CRITICAL"},l=90*Math.PI,n=t/100*l;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("svg",{width:s,height:.6*s,viewBox:"0 0 200 120",className:"overflow-visible",children:[(0,a.jsx)("path",{d:"M 10 110 A 90 90 0 0 1 190 110",fill:"none",stroke:"#334155",strokeWidth:"12",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M 10 110 A 90 90 0 0 1 190 110",fill:"none",stroke:r.primary,strokeWidth:"12",strokeLinecap:"round",strokeDasharray:l,strokeDashoffset:l-n,className:"transition-all duration-1000 ease-out",style:{filter:"drop-shadow(0 0 8px ".concat(r.primary,")")}}),(0,a.jsx)("text",{x:"100",y:"85",textAnchor:"middle",className:"fill-white text-4xl font-bold",style:{fontSize:"48px"},children:t}),(0,a.jsx)("text",{x:"100",y:"108",textAnchor:"middle",className:"fill-slate-400 text-sm font-medium",style:{fontSize:"12px"},children:"/100"})]}),(0,a.jsx)("div",{className:"mt-2 px-4 py-1 rounded-full text-sm font-bold tracking-wider",style:{backgroundColor:r.secondary,color:r.primary},children:r.label})]})}var x=s(2940),u=s(1935);function h(e){let{action:t,confidence:s,fraudProbability:r,recommendation:l}=e,n=(()=>{switch(t){case"APPROVE":return{bg:"bg-gradient-to-br from-green-500/20 to-green-600/10",border:"border-green-500/50",icon:(0,a.jsx)(x.Z,{className:"w-16 h-16 text-green-400"}),title:"APPROVED",titleColor:"text-green-400"};case"REJECT":return{bg:"bg-gradient-to-br from-red-500/20 to-red-600/10",border:"border-red-500/50",icon:(0,a.jsx)(u.Z,{className:"w-16 h-16 text-red-400"}),title:"REJECTED",titleColor:"text-red-400"};case"FLAG":return{bg:"bg-gradient-to-br from-yellow-500/20 to-orange-600/10",border:"border-yellow-500/50",icon:(0,a.jsx)(d.Z,{className:"w-16 h-16 text-yellow-400"}),title:"FLAGGED FOR REVIEW",titleColor:"text-yellow-400"}}})();return(0,a.jsx)("div",{className:"rounded-2xl border-2 ".concat(n.border," ").concat(n.bg," p-6 backdrop-blur-sm"),children:(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:n.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold ".concat(n.titleColor," mb-2"),children:n.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 text-slate-400"}),(0,a.jsxs)("span",{className:"text-slate-300 text-sm",children:["Confidence: ",(0,a.jsxs)("strong",{className:"text-white",children:[(100*s).toFixed(0),"%"]})]})]}),(0,a.jsxs)("div",{className:"px-2 py-0.5 rounded text-xs font-bold ".concat("LOW"===r?"bg-green-500/20 text-green-400":"MEDIUM"===r?"bg-yellow-500/20 text-yellow-400":"HIGH"===r?"bg-orange-500/20 text-orange-400":"bg-red-500/20 text-red-400"),children:[r," FRAUD RISK"]})]}),(0,a.jsx)("p",{className:"text-slate-300 text-sm leading-relaxed",children:l})]})]})})}var p=s(4392),g=s(2421),f=s(3231);let b={window_compliance:{label:"Refund Window",max:15},sentiment:{label:"Customer Sentiment",max:15},fraud_patterns:{label:"Fraud Patterns",max:35},reason_validity:{label:"Reason Validity",max:20},financial_risk:{label:"Financial Risk",max:10},delivery_verification:{label:"Delivery Status",max:10},evidence:{label:"Evidence Provided",max:5}};function j(e){let{scoreBreakdown:t,redFlags:s,greenFlags:l,reasoning:n,suggestedAction:i}=e,[o,c]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>c(!o),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-slate-700/30 transition-colors",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-white",children:"Detailed Analysis"}),o?(0,a.jsx)(p.Z,{className:"w-5 h-5 text-slate-400"}):(0,a.jsx)(g.Z,{className:"w-5 h-5 text-slate-400"})]}),o&&(0,a.jsxs)("div",{className:"px-6 pb-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-slate-400 mb-3",children:"Score Breakdown"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[Object.entries(b).map(e=>{let[s,{label:r,max:l}]=e,n=t[s],i=n/l*100;return(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-xs text-slate-400 mb-1",children:r}),(0,a.jsxs)("div",{className:"flex items-end gap-1",children:[(0,a.jsx)("span",{className:"text-xl font-bold text-white",children:n}),(0,a.jsxs)("span",{className:"text-xs text-slate-500 mb-1",children:["/",l]})]}),(0,a.jsx)("div",{className:"mt-2 h-1 bg-slate-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(i>70?"bg-red-500":i>40?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(i,"%")}})})]},s)}),(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-xs text-slate-400 mb-1",children:"Adjustments"}),(0,a.jsxs)("div",{className:"text-xl font-bold ".concat(t.adjustments<0?"text-green-400":"text-red-400"),children:[t.adjustments>0?"+":"",t.adjustments]})]})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"flex items-center gap-2 text-red-400 font-medium mb-3",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Red Flags (",s.length,")"]}),(0,a.jsx)("ul",{className:"space-y-2",children:s.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-red-400 mt-1",children:"•"}),e]},t))})]}),(0,a.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"flex items-center gap-2 text-green-400 font-medium mb-3",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"}),"Green Flags (",l.length,")"]}),(0,a.jsx)("ul",{className:"space-y-2",children:l.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-400 mt-1",children:"•"}),e]},t))})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 border border-slate-600 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-white font-medium mb-3",children:"Merchant Action"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm font-medium",children:i.primary}),i.alternative&&(0,a.jsxs)("span",{className:"text-slate-400 text-sm",children:["or ",i.alternative]})]}),i.talking_points.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-slate-500 mb-2",children:"Suggested Response:"}),i.talking_points.map((e,t)=>(0,a.jsxs)("p",{className:"text-sm text-slate-300 italic mb-1",children:['"',e,'"']},t))]})]})]})]})}var N=s(9343),v=s(1885),y=s(537),w=s(3274);let _=y.Ry({orderId:y.Z_().min(1,"Order ID is required"),refundAmount:y.Rx().min(.01,"Amount > 0"),orderTotal:y.Rx().min(.01,"Total > 0"),reason:y.Z_().min(1,"Reason required"),customerNote:y.Z_().optional(),customerSegment:y.Km(["New","Regular","VIP","High Risk"]),items:y.Z_().min(1,"Product required"),addressMismatch:y.O7().default(!1)});function k(e){let{onAnalyze:t,isLoading:s}=e,{register:r,handleSubmit:l,formState:{errors:n}}=(0,N.cI)({resolver:(0,v.F)(_),defaultValues:{refundAmount:0,orderTotal:0,addressMismatch:!1}});return(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-white",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Manual Analysis"})]}),(0,a.jsxs)("form",{onSubmit:l(e=>{let s=new Date,a=new Date;a.setDate(s.getDate()-14),t({refundAmount:e.refundAmount,orderTotal:e.orderTotal,refundReason:e.reason,customerNote:e.customerNote||"",orderDate:a.toISOString(),refundRequestDate:s.toISOString(),orderNumber:e.orderId,productNames:[e.items],productCategories:["General"],customerEmail:"customer@example.com",customerName:"Customer",customerHistory:{total_orders:"New"===e.customerSegment?1:10,total_refunds:"High Risk"===e.customerSegment?5:0,refund_rate:"High Risk"===e.customerSegment?.5:0,avg_order_value:e.orderTotal,account_age_days:"New"===e.customerSegment?14:365,total_spent:10*e.orderTotal,email_verified:!0,phone_verified:!0},isAddressMismatch:e.addressMismatch,deliveryStatus:"delivered",merchantPolicy:{refund_window_days:30,max_refund_rate:.1,min_order_age_hours:24,require_photo_proof:!1,auto_approve_threshold:20,auto_reject_threshold:80}})}),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Order ID"}),(0,a.jsx)("input",{...r("orderId"),className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm",placeholder:"ORD-123"}),n.orderId&&(0,a.jsx)("p",{className:"text-red-400 text-xs",children:n.orderId.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Product"}),(0,a.jsx)("input",{...r("items"),className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm",placeholder:"Product Name"}),n.items&&(0,a.jsx)("p",{className:"text-red-400 text-xs",children:n.items.message})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Refund Amount ($)"}),(0,a.jsx)("input",{type:"number",step:"0.01",...r("refundAmount",{valueAsNumber:!0}),className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"}),n.refundAmount&&(0,a.jsx)("p",{className:"text-red-400 text-xs",children:n.refundAmount.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Order Total ($)"}),(0,a.jsx)("input",{type:"number",step:"0.01",...r("orderTotal",{valueAsNumber:!0}),className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"}),n.orderTotal&&(0,a.jsx)("p",{className:"text-red-400 text-xs",children:n.orderTotal.message})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Reason"}),(0,a.jsxs)("select",{...r("reason"),className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm",children:[(0,a.jsx)("option",{value:"Quality not as expected",children:"Quality not as expected"}),(0,a.jsx)("option",{value:"Item arrived damaged",children:"Item arrived damaged"}),(0,a.jsx)("option",{value:"Changed my mind",children:"Changed my mind"}),(0,a.jsx)("option",{value:"Did not receive item",children:"Did not receive item"}),(0,a.jsx)("option",{value:"Ordered by mistake",children:"Ordered by mistake"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Customer Note"}),(0,a.jsx)("textarea",{...r("customerNote"),className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm",rows:2,placeholder:"Optional customer message"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Customer Segment"}),(0,a.jsxs)("select",{...r("customerSegment"),className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm ",children:[(0,a.jsx)("option",{value:"New",children:"New Customer"}),(0,a.jsx)("option",{value:"Regular",children:"Regular"}),(0,a.jsx)("option",{value:"VIP",children:"VIP"}),(0,a.jsx)("option",{value:"High Risk",children:"High Risk"})]})]}),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 text-slate-300 text-sm cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",...r("addressMismatch"),className:"bg-slate-900 border-slate-700 text-blue-500 rounded focus:ring-blue-500"}),"Address Mismatch"]})})]}),(0,a.jsxs)("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded flex justify-center items-center gap-2 disabled:opacity-50 transition-colors",children:[s?(0,a.jsx)(w.Z,{className:"w-4 h-4 animate-spin"}):null,s?"Analyzing...":"Analyze Refund"]})]})]})}var S=s(4086),A=s(2468),R=s(6884);function C(e){let{result:t,customerName:s}=e,[l,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&m()},[t,s]);let m=()=>{let e=s.split(" ")[0]||"Customer";o("APPROVE"===t.action?"Hi ".concat(e,",\n\nWe have good news regarding your refund request.\n\nAfter reviewing your case, we have approved your refund of $").concat(t.score_breakdown.financial_risk>0?"the requested amount":"the full amount",". You should see this appear on your original payment method within 5-10 business days.\n\nWe apologize for any inconvenience caused. We value your business and hope to serve you better next time.\n\nBest regards,\nThe Customer Service Team"):"REJECT"===t.action?"Hi ".concat(e,",\n\nThank you for contacting us regarding your order.\n\nWe have carefully reviewed your refund request. Unfortunately, we are unable to approve it at this time due to the following reason(s):\n\n").concat(t.suggested_action_for_merchant.talking_points.map(e=>"• ".concat(e)).join("\n"),"\n\n").concat(t.suggested_action_for_merchant.alternative?"\nHowever, we would like to offer: ".concat(t.suggested_action_for_merchant.alternative):"","\n\nIf you have any additional information that might help us reconsider, please let us know.\n\nBest regards,\nThe Customer Service Team"):"Hi ".concat(e,",\n\nThank you for your refund request.\n\nWe are currently reviewing your case, but we need a bit more information to proceed. Could you please provide:\n\n").concat(t.suggested_action_for_merchant.talking_points.map(e=>"• ".concat(e)).join("\n"),"\n\nOnce we receive this, we will be able to finalize your request immediately.\n\nBest regards,\nThe Customer Service Team"))};return(0,a.jsxs)("div",{className:"bg-slate-800/30 rounded-xl border border-slate-700/50 overflow-hidden mt-6",children:[(0,a.jsxs)("button",{onClick:()=>n(!l),className:"w-full flex items-center justify-between p-4 hover:bg-slate-800/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-400",children:(0,a.jsx)(S.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-200",children:"AI Response Draft"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:l?"Click to collapse":"Click to view suggested email response"})]})]}),l?(0,a.jsx)(p.Z,{className:"w-5 h-5 text-slate-500"}):(0,a.jsx)(g.Z,{className:"w-5 h-5 text-slate-500"})]}),l&&(0,a.jsxs)("div",{className:"p-4 pt-0 animate-in slide-in-from-top-2 duration-200",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{readOnly:!0,value:i,className:"w-full h-64 bg-slate-900/50 border border-slate-700 rounded-lg p-4 text-slate-300 text-sm font-mono resize-none focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(i),c(!0),setTimeout(()=>c(!1),2e3)},className:"absolute top-2 right-2 p-2 bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded-md transition-colors text-slate-400 hover:text-white",title:"Copy to clipboard",children:d?(0,a.jsx)(A.Z,{className:"w-4 h-4 text-green-400"}):(0,a.jsx)(R.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"mt-3 flex gap-2 text-xs text-slate-500",children:(0,a.jsx)("p",{children:"\uD83D\uDCA1 Tip: You can edit this draft before sending."})})]})]})}var D=s(1568),I=s(883),O=s(7592);function T(e){let{history:t,onSelect:s,onClear:r}=e;return 0===t.length?null:(0,a.jsxs)("div",{className:"bg-slate-800/30 rounded-xl border border-slate-700/50 mt-8 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-700/50 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-300",children:[(0,a.jsx)(D.Z,{className:"w-5 h-5"}),(0,a.jsx)("h3",{className:"font-semibold",children:"Recent Analysis History"})]}),(0,a.jsxs)("button",{onClick:r,className:"text-xs text-slate-500 hover:text-red-400 flex items-center gap-1 transition-colors",children:[(0,a.jsx)(I.Z,{className:"w-3 h-3"}),"Clear History"]})]}),(0,a.jsx)("div",{className:"divide-y divide-slate-700/50 max-h-80 overflow-y-auto",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>s(e),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 transition-colors text-left group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"\n                w-10 h-10 rounded-lg flex items-center justify-center\n                ".concat("APPROVE"===e.result.action?"bg-green-500/10 text-green-400":"","\n                ").concat("REJECT"===e.result.action?"bg-red-500/10 text-red-400":"","\n                ").concat("FLAG"===e.result.action?"bg-amber-500/10 text-amber-400":"","\n              "),children:["APPROVE"===e.result.action&&(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"REJECT"===e.result.action&&(0,a.jsx)(u.Z,{className:"w-5 h-5"}),"FLAG"===e.result.action&&(0,a.jsx)(d.Z,{className:"w-5 h-5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-slate-200",children:e.input.customerName||"Customer"}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"•"}),(0,a.jsx)("span",{className:"text-xs text-slate-400",children:e.input.orderNumber})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[(0,a.jsx)("span",{children:new Date(e.timestamp).toLocaleDateString()}),(0,a.jsxs)("span",{children:["$",e.input.refundAmount.toFixed(2)]}),(0,a.jsxs)("span",{className:"\n                    ".concat(e.result.risk_score>70?"text-red-400":"","\n                    ").concat(e.result.risk_score<30?"text-green-400":"","\n                    ").concat(e.result.risk_score>=30&&e.result.risk_score<=70?"text-amber-400":"","\n                  "),children:["Score: ",e.result.risk_score]})]})]})]}),(0,a.jsx)(O.Z,{className:"w-4 h-4 text-slate-600 group-hover:text-slate-400 transition-colors"})]},e.id))})]})}var E=s(4697),P=s(9590),Z=s(9061);let q={refund_window_days:30,max_refund_rate:.1,min_order_age_hours:24,require_photo_proof:!0,auto_approve_threshold:20,auto_reject_threshold:80};function H(e){let{isOpen:t,onClose:s,onSave:n,currentSettings:i}=e,[o,d]=(0,r.useState)(i),[c,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d(i)},[i,t]);let x=(e,t)=>{d(s=>({...s,[e]:t})),m(!1)};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm z-50 flex justify-end transition-all",children:(0,a.jsxs)("div",{className:"w-full max-w-md bg-slate-900 border-l border-slate-700 h-full p-6 overflow-y-auto shadow-2xl animate-in slide-in-from-right duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-white",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-400",children:(0,a.jsx)(l.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Policy Settings"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Configure AI decision rules"})]})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors",children:(0,a.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Return Window (Days)"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"range",min:"7",max:"90",step:"1",value:o.refund_window_days,onChange:e=>x("refund_window_days",parseInt(e.target.value)),className:"flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),(0,a.jsxs)("span",{className:"w-12 text-right font-mono text-blue-400 bg-blue-500/10 px-2 py-1 rounded",children:[o.refund_window_days,"d"]})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Refunds requested after this period will be flagged or rejected."})]}),(0,a.jsx)("hr",{className:"border-slate-800"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Require Photo Proof"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:'For "Damaged" or "Wrong Item" claims.'})]}),(0,a.jsx)("button",{onClick:()=>x("require_photo_proof",!o.require_photo_proof),className:"w-12 h-6 rounded-full transition-colors relative ".concat(o.require_photo_proof?"bg-blue-600":"bg-slate-700"),children:(0,a.jsx)("div",{className:"w-4 h-4 rounded-full bg-white absolute top-1 transition-transform ".concat(o.require_photo_proof?"left-7":"left-1")})})]}),(0,a.jsx)("hr",{className:"border-slate-800"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Auto-Approve Risk Score"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"range",min:"0",max:"50",step:"5",value:o.auto_approve_threshold,onChange:e=>x("auto_approve_threshold",parseInt(e.target.value)),className:"flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-green-500"}),(0,a.jsxs)("span",{className:"w-12 text-right font-mono text-green-400 bg-green-500/10 px-2 py-1 rounded",children:["<",o.auto_approve_threshold]})]}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Analysis with score below ",o.auto_approve_threshold," will be recommended for Approval."]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Auto-Reject Risk Score"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"range",min:"50",max:"100",step:"5",value:o.auto_reject_threshold,onChange:e=>x("auto_reject_threshold",parseInt(e.target.value)),className:"flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-red-500"}),(0,a.jsxs)("span",{className:"w-12 text-right font-mono text-red-400 bg-red-500/10 px-2 py-1 rounded",children:[">",o.auto_reject_threshold]})]}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Analysis with score above ",o.auto_reject_threshold," will be recommended for Rejection."]})]}),(0,a.jsx)("hr",{className:"border-slate-800"}),(0,a.jsxs)("div",{className:"pt-4 flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{d(q),m(!1)},className:"flex-1 py-3 px-4 rounded-lg border border-slate-700 hover:bg-slate-800 text-slate-300 font-medium transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(P.Z,{className:"w-4 h-4"}),"Reset"]}),(0,a.jsxs)("button",{onClick:()=>{n(o),m(!0),setTimeout(()=>m(!1),2e3),setTimeout(s,500)},className:"flex-1 py-3 px-4 rounded-lg bg-blue-600 hover:bg-blue-500 text-white font-medium transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4"}),c?"Saved!":"Save Settings"]})]})]})]})}):null}var M=s(998);let F={lowRisk:{name:"✅ Low Risk (Approve)",data:{refundAmount:49.99,orderTotal:49.99,refundReason:"Item arrived damaged - the packaging was crushed and product has a crack",customerNote:"I would like a refund please. Happy to send photos if needed. Thank you for your help!",orderDate:"2026-01-25",refundRequestDate:"2026-02-05",orderNumber:"ORD-2026-001234",productNames:["Ceramic Coffee Mug - Blue"],productCategories:["Kitchen","Drinkware"],isDigitalProduct:!1,customerEmail:"sarah.johnson@example.com",customerName:"Sarah Johnson",customerHistory:{total_orders:12,total_refunds:0,refund_rate:0,avg_order_value:65,account_age_days:730,total_spent:780,last_order_date:"2026-01-25",email_verified:!0,phone_verified:!0},shippingAddress:{country:"United States",city:"Austin",zip:"78701"},billingAddress:{country:"United States",city:"Austin",zip:"78701"},isAddressMismatch:!1,deliveryStatus:"delivered",deliveryDate:"2026-01-30",paymentMethod:"credit_card",isChargebackRisk:!1,merchantPolicy:{refund_window_days:30,max_refund_rate:.25,min_order_age_hours:24,require_photo_proof:!1,auto_approve_threshold:25,auto_reject_threshold:75}}},mediumRisk:{name:"⚠️ Medium Risk (Flag)",data:{refundAmount:189.99,orderTotal:189.99,refundReason:"Quality not as expected",customerNote:"The product looks different from the pictures. Want full refund.",orderDate:"2026-01-10",refundRequestDate:"2026-02-07",orderNumber:"ORD-2026-005678",productNames:["Designer Handbag - Limited Edition"],productCategories:["Fashion","Accessories"],isDigitalProduct:!1,customerEmail:"mike.chen@example.com",customerName:"Mike Chen",customerHistory:{total_orders:5,total_refunds:2,refund_rate:.4,avg_order_value:120,account_age_days:90,total_spent:600,email_verified:!0,phone_verified:!1},shippingAddress:{country:"United States",city:"Los Angeles",zip:"90001"},billingAddress:{country:"United States",city:"San Diego",zip:"92101"},isAddressMismatch:!0,deliveryStatus:"delivered",deliveryDate:"2026-01-15",paymentMethod:"paypal",isChargebackRisk:!1,merchantPolicy:{refund_window_days:30,max_refund_rate:.25,min_order_age_hours:24,require_photo_proof:!0,auto_approve_threshold:25,auto_reject_threshold:75},previousRefundReasons:["Did not like the color","Size was wrong"]}},highRisk:{name:"\uD83D\uDEA8 High Risk (Reject)",data:{refundAmount:499.99,orderTotal:499.99,refundReason:"Changed my mind",customerNote:"I want my money back NOW. If you dont refund I will dispute with my bank and leave bad reviews everywhere!",orderDate:"2026-02-08",refundRequestDate:"2026-02-09",orderNumber:"ORD-2026-009999",productNames:["Premium Wireless Headphones Pro"],productCategories:["Electronics","Audio"],isDigitalProduct:!1,customerEmail:"newuser12345@tempmail.com",customerName:"John Doe",customerHistory:{total_orders:1,total_refunds:0,refund_rate:0,avg_order_value:499.99,account_age_days:2,total_spent:499.99,email_verified:!1,phone_verified:!1},shippingAddress:{country:"United States",city:"Miami",zip:"33101"},billingAddress:{country:"Canada",city:"Toronto",zip:"M5V 1J9"},isAddressMismatch:!0,deliveryStatus:"in_transit",paymentMethod:"credit_card",isChargebackRisk:!0,merchantPolicy:{refund_window_days:30,max_refund_rate:.25,min_order_age_hours:48,require_photo_proof:!1,auto_approve_threshold:25,auto_reject_threshold:75},customerMessages:[{timestamp:"2026-02-09 10:00",message:"I want a refund immediately!",sentiment:"negative"},{timestamp:"2026-02-09 10:30",message:"If I dont get refund I will chargeback and destroy your reputation",sentiment:"threatening"}]}}};function z(){var e;let{data:t}=(0,M.useSession)(),[s,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[b,N]=(0,r.useState)(null),[v,y]=(0,r.useState)([]),[w,_]=(0,r.useState)(q),[S,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("refundAnalysisHistory");if(e)try{y(JSON.parse(e))}catch(e){console.error("Failed to parse history",e)}let t=localStorage.getItem("merchantSettings");if(t)try{_(JSON.parse(t))}catch(e){console.error("Failed to parse settings",e)}},[]);let R=(e,t)=>{let s=[{id:Date.now().toString(),timestamp:new Date().toISOString(),input:e,result:t},...v].slice(0,10);y(s),localStorage.setItem("refundAnalysisHistory",JSON.stringify(s))},D=async e=>{x(!0),f(null),p(null);let t={...e,merchantPolicy:w};N(t);try{let e=await fetch("/api/analyze-refund",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await e.json();if(!e.ok)throw Error(s.error||"Analysis failed");p(s.data),R(t,s.data)}catch(e){f(e instanceof Error?e.message:"Unknown error occurred")}finally{x(!1)}},I=e=>{D(F[e].data)};return(0,a.jsx)("main",{className:"min-h-screen p-8 bg-slate-950 text-slate-200 font-sans",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-12 relative",children:[(0,a.jsxs)("div",{className:"absolute right-0 top-0 flex items-center gap-3",children:[(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.image)&&(0,a.jsx)("img",{src:t.user.image,alt:t.user.name||"User",className:"w-8 h-8 rounded-full border border-slate-700 hidden sm:block"}),(0,a.jsx)("button",{onClick:()=>A(!0),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors flex items-center gap-2",title:"Settings",children:(0,a.jsx)(l.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>(0,M.signOut)(),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-slate-800 rounded-lg transition-colors flex items-center gap-2",title:"Sign Out",children:(0,a.jsx)(n.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-3 mb-4",children:[(0,a.jsx)(i.Z,{className:"w-12 h-12 text-green-400"}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-white",children:"RefundGuard AI"})]}),(0,a.jsx)("p",{className:"text-slate-400 text-lg max-w-2xl mx-auto",children:"Intelligent fraud detection powered by Groq (Llama 3.3). Analyze refund requests in seconds with AI-powered risk scoring and actionable recommendations."})]}),(0,a.jsx)(H,{isOpen:S,onClose:()=>A(!1),onSave:e=>{_(e),localStorage.setItem("merchantSettings",JSON.stringify(e))},currentSettings:w}),(0,a.jsx)(k,{onAnalyze:D,isLoading:s}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h2",{className:"text-sm font-medium text-slate-400 mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Or Try a Demo Scenario"]}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:Object.entries(F).map(e=>{let[t,r]=e;return(0,a.jsxs)("button",{onClick:()=>I(t),disabled:s,className:"p-4 rounded-xl border border-slate-700 bg-slate-800/50 hover:border-slate-600 hover:bg-slate-800 transition-all text-left disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)("div",{className:"font-semibold text-white mb-1",children:r.name}),(0,a.jsxs)("div",{className:"text-sm text-slate-400",children:["$",r.data.refundAmount.toFixed(2)," • ",r.data.customerHistory.total_orders," orders"]})]},t)})})]}),s&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-20 h-20 border-4 border-slate-700 rounded-full"}),(0,a.jsx)("div",{className:"absolute inset-0 w-20 h-20 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"})]}),(0,a.jsx)("p",{className:"mt-6 text-slate-300 text-lg",children:"Analyzing refund request..."}),(0,a.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"AI is evaluating 7 risk dimensions"})]}),g&&(0,a.jsx)("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-red-400 font-semibold",children:"Analysis Failed"}),(0,a.jsx)("p",{className:"text-slate-300 text-sm",children:g})]})]})}),u&&!s&&b&&(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 p-6 flex items-center justify-center",children:(0,a.jsx)(m,{score:u.risk_score,size:250})}),(0,a.jsx)("div",{className:"flex flex-col justify-center",children:(0,a.jsx)(h,{action:u.action,confidence:u.confidence,fraudProbability:u.fraud_probability,recommendation:u.reasoning.recommendation})})]}),(0,a.jsx)("div",{className:"bg-slate-800/30 rounded-xl border border-slate-700/50 p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 text-slate-300",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-slate-400"}),(0,a.jsx)("span",{className:"font-medium",children:b.customerName}),(0,a.jsx)("span",{className:"text-slate-500",children:"•"}),(0,a.jsxs)("span",{className:"text-slate-400",children:["Order #",b.orderNumber]}),(0,a.jsx)("span",{className:"text-slate-500",children:"•"}),(0,a.jsxs)("span",{className:"text-slate-400",children:['Reason: "',b.refundReason,'"']})]})}),(0,a.jsx)(j,{scoreBreakdown:u.score_breakdown,redFlags:u.red_flags,greenFlags:u.green_flags,reasoning:u.reasoning,suggestedAction:u.suggested_action_for_merchant}),(0,a.jsx)(C,{result:u,customerName:(null==b?void 0:b.customerName)||"Customer"})]}),(0,a.jsx)(T,{history:v,onSelect:e=>{N(e.input),p(e.result),window.scrollTo({top:0,behavior:"smooth"})},onClear:()=>{y([]),localStorage.removeItem("refundAnalysisHistory")}}),(0,a.jsx)("footer",{className:"mt-16 text-center text-slate-500 text-sm",children:(0,a.jsx)("p",{children:"Powered by Groq (Llama 3.3) • Built for intelligent fraud detection"})})]})})}}},function(e){e.O(0,[998,870,971,23,744],function(){return e(e.s=4796)}),_N_E=e.O()}]);